{% extends "market/web/base_web.html" %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">{{ page_title }}</h1>
</div>

{% if update_logs %}
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Commodity</th>
                    <th>Status</th>
                    <th>Started At</th>
                    <th>Completed At</th>
                    <th>Duration</th>
                    <th>Records Updated</th>
                </tr>
            </thead>
            <tbody>
                {% for log in update_logs %}
                <tr>
                    <td><a href="{% url 'market-web:commodity-detail' pk=log.commodity.id %}">{{ log.commodity.name }}</a></td>
                    <td>
                        {% if log.status == 'success' %}
                            <span class="badge bg-success">Success</span>
                        {% elif log.status == 'failed' %}
                            <span class="badge bg-danger">Failed</span>
                        {% elif log.status == 'in_progress' %}
                            <span class="badge bg-warning">In Progress</span>
                        {% else %}
                            <span class="badge bg-secondary">{{ log.status }}</span>
                        {% endif %}
                    </td>
                    <td>{{ log.started_at|date:"Y-m-d H:i:s" }}</td>
                    <td>{{ log.completed_at|date:"Y-m-d H:i:s"|default:"-" }}</td>
                    <td>{{ log.duration|default:"-" }}</td>
                    <td>{{ log.records_updated|default:"0" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% include "market/web/includes/pagination.html" %}
{% else %}
    <p class="alert alert-info">No update logs found.</p>
{% endif %}
{% endblock content %} 